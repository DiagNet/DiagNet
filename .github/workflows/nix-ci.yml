name: Nix CI

on:
  pull_request:
  merge_group:

jobs:
  check-code:
    name: Check code
    uses: ./.github/workflows/nix.yml
    with:
      command: nix flake check

  test-code:
    name: Test code
    uses: ./.github/workflows/nix.yml
    with:
      command: nix develop --command uv run manage.py test
