{% extends "popup.html" %}
{% load static %}

{% block modal_title %}My First Popup{% endblock %}

{% block extra_head %}
<style>
    .modal-body {
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
    }

    .transition-transform {
        transition: transform 0.4s ease;
    }

    .modal-header {
        border: none !important;
    }

    /* NEW - use a class for outer sliding tabs */
    .outer-slide-pane {
        flex: 0 0 100%;
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
    }

    #popupTabsContent {
        display: flex;
        flex-grow: 1;
        transition: transform 0.4s ease;
        height: 100%;
    }
</style>
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="{% static 'css/choose_test.css' %}">
<link rel="stylesheet" href="{% static 'css/choose_parameters.css' %}">

{% endblock %}


{% block modal_header %}
<div class="modal-header justify-content-center">
    <ul class="nav nav-pills" id="popupTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="template-tab" type="button">Template</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" id="parameters-tab" type="button">Parameters</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link disabled" id="info-tab" type="button">Info</button>
        </li>
    </ul>
    <button type="button" class="btn-close position-absolute end-0 me-3" data-bs-dismiss="modal"
            aria-label="Close"></button>
</div>
{% endblock %}

{% block modal_body %}

<div class="modal-body p-0" style="overflow:hidden;">
    <div id="popupTabsContent" class="d-flex transition-transform">
        <div id="template-site" class="tab-pane outer-slide-pane" style="flex-shrink:0; width:100%; padding:1rem;">
            {% include "networktests/partials/create_popup/popup/choose_test.html" %}
        </div>
        <div class="tab-pane outer-slide-pane" style="flex-shrink:0; width:100%; padding:1rem;">
            {% include "networktests/partials/create_popup/popup/choose_parameters.html" %}
        </div>
        <div class="tab-pane outer-slide-pane" style="flex-shrink:0; width:100%; padding:1rem;">
            {% include "networktests/partials/create_popup/popup/choose_test_values.html" %}
        </div>
    </div>
</div>

<!-- Templates -->
{% include "networktests/partials/create_popup/popup/input_fields/single_line_input_field_2.html" %}
{% include "networktests/partials/create_popup/popup/input_fields/choice_input_field.html" %}
{% include "networktests/partials/create_popup/popup/input_fields/list_input_field.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/show_list_parameter_info.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/show_regular_parameter_info.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/list_item_templates/list_item_page_info.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/list_item_templates/list_item_inline_view.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/list_item_templates/list_item_values_templates/default_item.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/list_item_templates/list_item_values_templates/list_item.html" %}
{% include "networktests/partials/create_popup/popup/info_tab_templates/list_item_templates/list_item_values_templates/index_count_inside_list.html" %}

<script>

    const tabs = document.querySelectorAll('#popupTabs .nav-link');
    const container = document.getElementById('popupTabsContent');

    tabs.forEach((tab, i) => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            container.style.transform = `translateX(-${i * 100}%)`;
        });
    });

</script>

<script src="{% static 'js/create_test/api_calls.js' %}"></script>
<script src="{% static 'js/create_test/choose_test.js' %}"></script>
<script src="{% static 'js/create_test/handle_parameters/parameter_info_tab.js' %}"></script>
<script src="{% static 'js/create_test/handle_parameters/handle_parameter_tabs.js' %}"></script>
<script src="{% static 'js/create_test/handle_parameters/handle_datatypes.js' %}"></script>
<script src="{% static 'js/create_test/handle_parameters/create_parameter_fields.js' %}"></script>
<script src="{% static 'js/create_test/handle_parameters/choose_parameters.js' %}"></script>
<script src="{% static 'js/create_test/choose_test_values.js' %}"></script>


{% endblock %}